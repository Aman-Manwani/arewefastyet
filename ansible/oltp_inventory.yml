# Copyright 2021 The Vitess Authors.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#    http://www.apache.org/licenses/LICENSE-2.0
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

---
# Inventory file for non-sharded Vitess cluster with OLTP benchmark configuration.
all:
  vars:
    vitess_git_version: "HEAD"
    arewefastyet_git_repo: "https://github.com/vitessio/arewefastyet.git"
    arewefastyet_git_version: "HEAD"
    cell: local
    keyspace: main
    oltp_table_size: 1
    oltp_threads: 5
    oltp_preparation_time: 5
    oltp_warmup_time: 5
    oltp_test_time: 5
    oltp_number_tables: 5
    provision: 1
    oltp: 1
  hosts:
    DEVICE_IP_0:
      storage_device:
        device: nvme0n1
        partition: nvme0n1p1
  children:
    sysbench:
      hosts:
        DEVICE_IP_0:
    prometheus:
      hosts:
        DEVICE_IP_0:
    etcd:
      hosts:
        DEVICE_IP_0:
    vtctld:
      hosts:
        DEVICE_IP_0:
    vtgate:
      vars:
        vtgate_query_cache_size: 1000
        vtgate_max_goproc: 6
      hosts:
        DEVICE_IP_0:
          gateways:
            - id: 1
              port: 15001
              mysql_port: 13306
              grpc_port: 15306
            - id: 2
              port: 15002
              mysql_port: 13307
              grpc_port: 15307
    vttablet:
      vars:
        vitess_memory_ratio: 0.6
        vttablet_query_cache_size: 10000
        vttablet_max_goproc: 24
      hosts:
        DEVICE_IP_0:
          tablets:
            - id: 1001
              keyspace: main
              shard: 0
              pool_size: 500
              transaction_cap: 2000
